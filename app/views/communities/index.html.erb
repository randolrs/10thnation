
<% if user_signed_in?%>

  <% if current_user.admin %>

<h1>Listing Communities</h1>

<table>
  <thead>
    <tr>
      <th>User</th>
      <th>Name</th>
      <th>Description</th>
      <th>Approved</th>
      <th>Parent community</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @communities.each do |community| %>
      <tr>
        <td><%= community.user_id %></td>
        <td><%= community.name %></td>
        <td><%= community.description %></td>
        <td><%= community.approved %></td>
        <td><%= community.parent_community_id %></td>
        <td><%= link_to 'Show', community %></td>
        <td><%= link_to 'Edit', edit_community_path(community) %></td>
        <td><%= link_to 'Destroy', community, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Community', new_community_path %>

<%else%>

  <div class="content">

    <div class="content-box">

      <div class="main-content-column">

        <div class="column-content" id="column_content_posts">

          <div class="community-list-container">

            <% Community.all.each do |community| %>

              <%= render :partial => 'communities/list', :locals => {:community => community} %>

            <%end%>

          </div>

        </div>

      </div>

    </div>

  </div>


<%end%>


<%else%>

  <div class="content">

    <div class="content-box">

      <div class="main-content-column">

        <div class="column-content" id="column_content_posts">

          <div class="community-list-container">

            <% Community.all.each do |community| %>

              <%= render :partial => 'communities/list', :locals => {:community => community} %>

            <%end%>

          </div>

        </div>

      </div>

    </div>

  </div>

<%end%>
